# 网络层

主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是数据报。

## 功能
- 路由选择与分组转发  (最佳路径)
- 异构网路互联
- 拥塞控制：若所有的节点都来不及接受分组，而要丢失大量分组的话，网络就处于拥塞状态。因此要采取一定措施，缓解这种拥塞。


WAY1：开环控制  静态

WAY2：闭环控制  动态


## 数据交换
很多台主机进行通信，建立好链路，才能通信。
![](https://files.mdnice.com/user/8332/407d30cc-174a-42c2-8932-0e6a9e35110c.png)
- 第一种：
  - 当主机变多时，链路之间的线路比较多，花费人力物力，并且主机隔着相对较远，信号也会有一定的衰减。
- 第二种：
  - 主机变多，对交换设备的端口变多，流量，吞吐量变大
  - 主机距离较远，很难连接到交换设备，链路过长，信号也会有一定的衰减
- 第三种
  - 交换设备互联，十几个端口就可以了，也可以实现远距离的通信

### 电路交换
电话网络
电路交换的阶段：
- 建立连接(呼叫/电路建立)
- 通信
- 释放连接(拆除电路)

#### 特点
独占资源

#### 优点
- 通信时延小：并不需要检错
- 有序传输
- 没有冲突：独占不会有冲突
- 实时性强：建立成功，随时可以通信

#### 缺点
- 建立连接时间长：需要等待对方把电话拿起来，才成功建立连接
- 线路独占，使用效率低：如果对方都不说话，那么也会占用
- 灵活性差：其中一个交换设备出现问题，宕机，a和b就无法通信了
- 无差错控制能力：不会进行检错纠错，单纯只做交换。
### 报文交换
串行
![](https://files.mdnice.com/user/8332/131dba12-cddc-4433-80f3-6d1e153b2d4e.png)

报文：源一个用发送的信息整体
- 交换设备具有存储转发的功能。存储到链路可用的时候。
- 路径并不是固定，随机性

#### 优点
- 无需建立连接
- 存储转发，动态分配线路：多条路随意选择
- 线路可靠性较高：如果某一个交换设备换掉了，可以走其他的交换设备
- 线路利用率较高：当一个报文在一个交换设备中，其他的交换设备可以有其他主机使用
- 多目标服务：一个报文可以发往多个目的地址

#### 缺点
- 有存储转发时延
- 报文大小不定，需要网路节点有较大缓存空间
### 分组交换
并发
![](https://files.mdnice.com/user/8332/83f2bd48-80c3-4638-b0a2-5a1e9101117d.png)
#### 优点
- 无需建立连接
- 存储转发，动态分配线路
- 线路可靠性较高
- 线路利用率较高
- 相对于报文交换，存储管理更容易

#### 缺点
- 有存储转发时延
- 需要传输额外的信息量
- 乱序到目的主机时，要对分组排序重组
源地址，目的地址，分组的编号

![](https://files.mdnice.com/user/8332/ae068c7b-f264-4aad-844c-68b2e227b6dc.png)


#### 数据报方式

![](https://files.mdnice.com/user/8332/bba14db6-74b2-4cc4-9ea0-9e6c793b4e6a.png)

#### 虚电路方式
查询路由器转发表，走对应的端口。

![](https://files.mdnice.com/user/8332/a7ff469d-a599-4a5f-8431-ffbcc6ee2137.png)




## 比较
![](https://files.mdnice.com/user/8332/36fcd959-a09a-4c04-9bde-bdb22d85f53a.png)


![](https://files.mdnice.com/user/8332/008898f3-798f-4ebc-8172-ee8adefe984c.png)

## 总结

![](https://files.mdnice.com/user/8332/bc9a8503-a1b8-4e50-a438-416f97a77e0c.png)
